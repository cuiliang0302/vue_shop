{"version":3,"sources":["webpack:///./src/components/user/Users.vue?2a9c","webpack:///src/components/user/Users.vue","webpack:///./src/components/user/Users.vue?4c99","webpack:///./src/components/user/Users.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","path","_v","staticClass","on","getUserList","model","value","queryInfo","callback","$$v","$set","expression","slot","$event","addDialogVisible","staticStyle","userlist","scopedSlots","_u","key","fn","slotProp","userActiveChange","row","editDialog","id","removeUser","setRole","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addDialogClosed","ref","addForm","addFormRules","addUser","editDialogVisible","editForm","editUserInfo","setDialogVisible","setDialogClose","_s","userInfo","username","role_name","selectRoleId","_l","item","roleName","saveRoleInfo","staticRenderFns","name","data","regMobile","test","Error","query","password","email","mobile","rolesList","created","methods","$http","get","result","meta","status","newSize","newPage","put","$refs","addFormRef","resetFields","validate","valid","params","append","then","editFormRef","$confirm","confirmButtonText","cancelButtonText","type","message","$message","error","component"],"mappings":"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","file":"js/users.21d523a1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',{staticClass:\"box-card\"},[_c('el-row',{attrs:{\"gutter\":30}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.getUserList},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUserList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.userlist,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"ID\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"姓名\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobile\",\"label\":\"电话\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":\"角色\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProp){return [_c('el-switch',{on:{\"change\":function($event){return _vm.userActiveChange(slotProp.row)}},model:{value:(slotProp.row.mg_state),callback:function ($$v) {_vm.$set(slotProp.row, \"mg_state\", $$v)},expression:\"slotProp.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200px\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProp){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.editDialog(slotProp.row.id)}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeUser(slotProp.row.id)}}}),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.setRole(slotProp.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":this.queryInfo.pagenum,\"page-sizes\":[5, 10, 20],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.addDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.addDialogClosed}},[_c('el-form',{ref:\"addFormRef\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", $$v)},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", $$v)},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addForm.email),callback:function ($$v) {_vm.$set(_vm.addForm, \"email\", $$v)},expression:\"addForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addForm.mobile),callback:function ($$v) {_vm.$set(_vm.addForm, \"mobile\", $$v)},expression:\"addForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改用户信息\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event}}},[_c('el-form',{ref:\"editFormRef\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.addFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editForm.username),callback:function ($$v) {_vm.$set(_vm.editForm, \"username\", $$v)},expression:\"editForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editForm.email),callback:function ($$v) {_vm.$set(_vm.editForm, \"email\", $$v)},expression:\"editForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editForm.mobile),callback:function ($$v) {_vm.$set(_vm.editForm, \"mobile\", $$v)},expression:\"editForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUserInfo}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.setDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setDialogVisible=$event},\"close\":_vm.setDialogClose}},[_c('div',[_c('p',[_vm._v(\"当前的用户：\"+_vm._s(_vm.userInfo.username))]),_c('p',[_vm._v(\"当前的角色：\"+_vm._s(_vm.userInfo.role_name))]),_c('p',[_vm._v(\"分配新角色： \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectRoleId),callback:function ($$v) {_vm.selectRoleId=$$v},expression:\"selectRoleId\"}},_vm._l((_vm.rolesList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveRoleInfo}},[_vm._v(\"确 定\")])],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!--  面包屑导航-->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\n    </el-breadcrumb>\n    <!--  卡片视图-->\n    <el-card class=\"box-card\">\n      <!--    搜索与添加-->\n      <el-row :gutter=\"30\">\n        <el-col :span=\"8\">\n          <el-input v-model=\"queryInfo.query\" @clear=\"getUserList\" placeholder=\"请输入内容\" class=\"input-with-select\"\n                    clearable>\n            <el-button @click=\"getUserList\" slot=\"append\" icon=\"el-icon-search\"></el-button>\n          </el-input>\n        </el-col>\n        <el-col :span=\"4\">\n          <el-button @click=\"addDialogVisible = true\" type=\"primary\">添加用户</el-button>\n        </el-col>\n      </el-row>\n      <!--    用户列表区域-->\n      <el-table :data=\"userlist\" style=\"width: 100%\" border stripe>\n        <el-table-column type=\"index\" label=\"ID\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"username\" label=\"姓名\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"email\" label=\"邮箱\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"mobile\" label=\"电话\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"role_name\" label=\"角色\" align=\"center\"></el-table-column>\n        <el-table-column label=\"状态\" align=\"center\">\n          <template v-slot=\"slotProp\">\n            <el-switch v-model=\"slotProp.row.mg_state\" @change=\"userActiveChange(slotProp.row)\"></el-switch>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"200px\" align=\"center\">\n          <template v-slot=\"slotProp\">\n            <el-button @click=\"editDialog(slotProp.row.id)\" type=\"primary\" icon=\"el-icon-edit\" size=\"mini\"></el-button>\n            <el-button @click=\"removeUser(slotProp.row.id)\" type=\"danger\" icon=\"el-icon-delete\" size=\"mini\"></el-button>\n            <el-tooltip class=\"item\" effect=\"dark\" content=\"分配角色\" placement=\"top\" :enterable=\"false\">\n              <el-button @click=\"setRole(slotProp.row)\" type=\"warning\" icon=\"el-icon-setting\" size=\"mini\"></el-button>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!--      分页区域-->\n      <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=this.queryInfo.pagenum\n          :page-sizes=\"[5, 10, 20]\"\n          :page-size=queryInfo.pagesize\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n      </el-pagination>\n\n      <!--      添加用户对话框-->\n      <el-dialog title=\"添加用户\" :visible.sync=\"addDialogVisible\" @close=\"addDialogClosed\" width=\"50%\">\n        <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"70px\" class=\"demo-ruleForm\">\n          <el-form-item label=\"用户名\" prop=\"username\">\n            <el-input v-model=\"addForm.username\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码\" prop=\"password\">\n            <el-input v-model=\"addForm.password\" type=\"password\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"邮箱\" prop=\"email\">\n            <el-input v-model=\"addForm.email\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"手机\" prop=\"mobile\">\n            <el-input v-model=\"addForm.mobile\"></el-input>\n          </el-form-item>\n        </el-form>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"addDialogVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\n        </span>\n      </el-dialog>\n      <!--      修改用户对话框-->\n      <el-dialog title=\"修改用户信息\" :visible.sync=\"editDialogVisible\" width=\"50%\">\n        <el-form :model=\"editForm\" :rules=\"addFormRules\" ref=\"editFormRef\" label-width=\"70px\" class=\"demo-ruleForm\">\n          <el-form-item label=\"用户名\">\n            <el-input v-model=\"editForm.username\" disabled></el-input>\n          </el-form-item>\n          <el-form-item label=\"邮箱\" prop=\"email\">\n            <el-input v-model=\"editForm.email\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"手机\" prop=\"mobile\">\n            <el-input v-model=\"editForm.mobile\"></el-input>\n          </el-form-item>\n        </el-form>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"editDialogVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"editUserInfo\">确 定</el-button>\n        </span>\n      </el-dialog>\n      <!--      分配角色对话框-->\n      <el-dialog title=\"分配角色\" :visible.sync=\"setDialogVisible\" width=\"50%\" @close=\"setDialogClose\">\n        <div>\n          <p>当前的用户：{{ userInfo.username }}</p>\n          <p>当前的角色：{{ userInfo.role_name }}</p>\n          <p>分配新角色：\n            <el-select v-model=\"selectRoleId\" placeholder=\"请选择\">\n              <el-option\n                  v-for=\"item in rolesList\"\n                  :key=\"item.id\"\n                  :label=\"item.roleName\"\n                  :value=\"item.id\">\n              </el-option>\n            </el-select>\n          </p>\n        </div>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"setDialogVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"saveRoleInfo\">确 定</el-button>\n        </span>\n      </el-dialog>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Users\",\n  data() {\n    const checkMobile = (rule, value, callback) => {\n      // 验证手机号\n      let regMobile = /^1[0-9]{10}$/\n      if (regMobile.test(value)) {\n        return callback()\n      } else {\n        return callback(new Error('请输入合法的手机号'))\n      }\n    }\n    return {\n      // 获取用户列表参数\n      queryInfo: {\n        query: \"\",\n        pagenum: 1,\n        pagesize: 5\n      },\n      userlist: [],\n      total: 0,\n      // 添加用户对话框默认是否显示\n      addDialogVisible: false,\n      // 修改用户对话框默认是否显示\n      editDialogVisible: false,\n      // 添加用户表单\n      addForm: {\n        username: '',\n        password: '',\n        email: '',\n        mobile: ''\n      },\n      // 修改用户信息表单\n      editForm: {},\n      //添加用户表单规则验证\n      addFormRules: {\n        username: [\n          {required: true, message: '请输入用户名', trigger: ['blur', 'change']},\n          {min: 3, max: 10, message: '用户名长度为3到10位', trigger: ['blur', 'change']}\n        ],\n        password: [\n          {required: true, message: '请输入密码', trigger: ['blur', 'change']},\n          {min: 6, max: 15, message: '密码长度为6到15位', trigger: ['blur', 'change']}\n        ],\n        email: [\n          {required: true, message: '请输入邮箱号', trigger: ['blur', 'change']},\n          {type: 'email', message: '请输入正确的邮箱号', trigger: ['blur', 'change']}\n        ],\n        mobile: [\n          {required: true, message: '请输入手机号', trigger: ['blur', 'change']},\n          {validator: checkMobile, trigger: ['blur', 'change']}\n        ]\n      },\n      // 分配角色对话框默认是否显示\n      setDialogVisible: false,\n      // 需要被分配角色的用户信息\n      userInfo: {},\n      // 所有角色的数据列表\n      rolesList:'',\n      // 选中的新角色id\n      selectRoleId:'',\n    }\n  },\n  created() {\n    this.getUserList()\n  },\n  methods: {\n    getUserList() {\n      // 获取用户列表\n      this.$http.get('users', {params: this.queryInfo}).then(response => {\n        console.log(response);//请求正确时执行的代码\n        let result = response.data\n        if (result.meta.status === 200) {\n          // this.$message.success(result.message)\n          this.userlist = result.data.users\n          this.total = result.data.total\n        } else {\n          this.$message.error('获取列表失败！')\n        }\n      }).catch(response => {\n        //发生错误时执行的代码\n        this.$message.warning('服务器错误！')\n        console.log(response)\n      });\n    },\n    handleSizeChange(newSize) {\n      // 改变分页尺寸\n      this.queryInfo.pagesize = newSize\n      this.getUserList()\n    },\n    handleCurrentChange(newPage) {\n      // 改变分页页数\n      this.queryInfo.pagenum = newPage\n      this.getUserList()\n    },\n    userActiveChange(userinfo) {\n      // 修改用户状态\n      this.$http.put(`users/${userinfo.id}/state/${userinfo.mg_state}`).then(response => {\n        console.log(response);//请求正确时执行的代码\n        let result = response.data\n        if (result.meta.status === 200) {\n          this.$message.success(result.meta.msg)\n        } else {\n          this.$message.error('修改失败！')\n        }\n      }).catch(response => {\n        //发生错误时执行的代码\n        this.$message.warning('服务器错误！')\n        console.log(response)\n      });\n    },\n    addDialogClosed() {\n      // 对话框关闭事件\n      this.$refs.addFormRef.resetFields()\n    },\n    addUser() {\n      // 点击确定添加用户，预校验\n      this.$refs.addFormRef.validate(valid => {\n        console.log(valid)\n        if (valid) {\n          let params = new URLSearchParams()\n          params.append(\"username\", this.addForm.username)\n          params.append(\"password\", this.addForm.password)\n          params.append(\"email\", this.addForm.email)\n          params.append(\"mobile\", this.addForm.mobile)\n          this.$http.post('users', params).then(response => {\n            console.log(response);//请求正确时执行的代码\n            let result = response.data\n            if (result.meta.status === 201) {\n              this.$message.success(result.meta.msg)\n              this.addDialogVisible = false\n              // 隐藏添加用户对话框\n              this.getUserList()\n              // 重新获取用户列表\n            } else {\n              this.$message.error('添加用户失败！')\n            }\n          }).catch(response => {\n            //发生错误时执行的代码\n            this.$message.warning('服务器错误！')\n            console.log(response)\n          });\n        }\n      })\n    },\n    // 用户编辑对话框\n    editDialog(id) {\n      // console.log(id)\n      this.editDialogVisible = true\n      this.$http.get('users/' + id).then(response => {\n        console.log(response);//请求正确时执行的代码\n        let result = response.data\n        if (result.meta.status === 200) {\n          this.$message.success(result.meta.msg)\n          this.editForm = result.data\n        } else {\n          this.$message.error('查询信息失败！')\n        }\n      }).catch(response => {\n        //发生错误时执行的代码\n        this.$message.warning('服务器错误！')\n        console.log(response)\n      });\n    },\n    editUserInfo() {\n      // 修改用户信息并提交\n      this.$refs.editFormRef.validate(valid => {\n        if (valid) {\n          this.$http.put('users/' + this.editForm.id, {\n            email: this.editForm.email,\n            mobile: this.editForm.mobile\n          }).then(response => {\n            console.log(response);//请求正确时执行的代码\n            let result = response.data\n            if (result.meta.status === 200) {\n              this.$message.success(result.meta.msg)\n              this.editDialogVisible = false\n              this.getUserList()\n            } else {\n              this.$message.error('修改失败！')\n            }\n          }).catch(response => {\n            //发生错误时执行的代码\n            this.$message.warning('服务器错误！')\n            console.log(response)\n          });\n        }\n      })\n    },\n    removeUser(id) {\n      // 删除用户\n      this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$http.delete('users/' + id).then(response => {\n          console.log(response);//请求正确时执行的代码\n          let result = response.data\n          if (result.meta.status === 200) {\n            this.$message({\n              type: 'success',\n              message: '删除用户成功!'\n            });\n            this.getUserList()\n          } else {\n            this.$message.error('删除用户失败！')\n          }\n        }).catch(response => {\n          //发生错误时执行的代码\n          this.$message.warning('服务器错误！')\n          console.log(response)\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    // 分配角色对话框\n    setRole(userInfo) {\n      // 获取所有的角色列表\n      this.$http.get('roles').then(response => {\n        console.log(response);//请求正确时执行的代码\n        let result = response.data\n        if (result.meta.status === 200) {\n          this.$message.success(result.meta.msg)\n          this.rolesList = result.data\n        } else {\n          this.$message.error('获取角色列表失败！')\n        }\n      }).catch(response => {\n        //发生错误时执行的代码\n        this.$message.warning('服务器错误！')\n        console.log(response)\n      });\n      this.userInfo = userInfo\n      this.setDialogVisible = true\n    },\n    //点击按钮分配角色\n    saveRoleInfo(){\n      if(!this.selectRoleId){\n        return this.$message.error(\"请选择要分配的角色！\")\n      }\n      console.log(this.userInfo)\n      console.log(this.rolesList)\n      this.$http.put(`users/${this.userInfo.id}/role`,{rid:this.selectRoleId}).then(response => {\n        console.log(response);//请求正确时执行的代码\n        let result = response.data\n        if (result.meta.status === 200) {\n          this.$message.success(result.meta.msg)\n          this.getUserList()\n          this.setDialogVisible = false\n        } else {\n          this.$message.error('修改失败！')\n        }\n      }).catch(response => {\n        //发生错误时执行的代码\n        this.$message.warning('服务器错误！')\n        console.log(response)\n      });\n    },\n    // 关闭分配权限对话框\n    setDialogClose(){\n      this.selectRoleId = ''\n      this.userInfo = {}\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=20f992c6&scoped=true&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20f992c6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}