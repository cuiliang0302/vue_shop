(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goods"],{"016a":function(t,e,a){},"10d0":function(t,e,a){"use strict";a("016a")},1276:function(t,e,a){"use strict";var r=a("d784"),i=a("44e7"),n=a("825a"),s=a("1d80"),o=a("4840"),l=a("8aa5"),c=a("50c4"),u=a("14c3"),d=a("9263"),m=a("d039"),g=[].push,p=Math.min,f=4294967295,h=!m((function(){return!RegExp(f,"y")}));r("split",2,(function(t,e,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var r=String(s(this)),n=void 0===a?f:a>>>0;if(0===n)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,n);var o,l,c,u=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,h=new RegExp(t.source,m+"g");while(o=d.call(h,r)){if(l=h.lastIndex,l>p&&(u.push(r.slice(p,o.index)),o.length>1&&o.index<r.length&&g.apply(u,o.slice(1)),c=o[0].length,p=l,u.length>=n))break;h.lastIndex===o.index&&h.lastIndex++}return p===r.length?!c&&h.test("")||u.push(""):u.push(r.slice(p)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var i=s(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,i,a):r.call(String(i),e,a)},function(t,i){var s=a(r,t,this,i,r!==e);if(s.done)return s.value;var d=n(t),m=String(this),g=o(d,RegExp),b=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"y":"g"),_=new g(h?d:"^(?:"+d.source+")",v),y=void 0===i?f:i>>>0;if(0===y)return[];if(0===m.length)return null===u(_,m)?[m]:[];var x=0,w=0,$=[];while(w<m.length){_.lastIndex=h?w:0;var C,F=u(_,h?m:m.slice(w));if(null===F||(C=p(c(_.lastIndex+(h?0:w)),m.length))===x)w=l(m,w,b);else{if($.push(m.slice(x,w)),$.length===y)return $;for(var k=1;k<=F.length-1;k++)if($.push(F[k]),$.length===y)return $;w=x=C}}return $.push(m.slice(x)),$}]}),!h)},"14c3":function(t,e,a){var r=a("c6b6"),i=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var n=a.call(t,e);if("object"!==typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"159b":function(t,e,a){var r=a("da84"),i=a("fdbc"),n=a("17c2"),s=a("9112");for(var o in i){var l=r[o],c=l&&l.prototype;if(c&&c.forEach!==n)try{s(c,"forEach",n)}catch(u){c.forEach=n}}},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,i=a("a640"),n=a("ae40"),s=i("forEach"),o=n("forEach");t.exports=s&&o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"3b0d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("参数列表")])],1),a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"注意：只允许为第三级分类设置相关参数",type:"warning",closable:!1,"show-icon":""}}),a("el-row",[a("el-col",[a("span",[t._v("选择商品分类：")]),a("el-cascader",{attrs:{options:t.catelist,clearable:"",props:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"}},on:{change:t.parentCateChange},model:{value:t.selectKeys,callback:function(e){t.selectKeys=e},expression:"selectKeys"}})],1)],1),a("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[a("el-button",{attrs:{type:"primary",disabled:t.isBtnDisabled},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加参数")]),a("el-table",{attrs:{data:t.manyTableData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(r,i){return a("el-tag",{key:i,attrs:{closable:""},on:{close:function(a){return t.handleClose(i,e.row)}}},[t._v(t._s(r))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"slotProp.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{label:"ID",type:"index",align:"center"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name",align:"center"}}),a("el-table-column",{attrs:{label:"操作",sortable:"",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.editDialog(e.row.attr_id)}}},[t._v("编辑 ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.removeParams(e.row.attr_id)}}},[t._v(" 删除 ")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[a("el-button",{attrs:{type:"primary",disabled:t.isBtnDisabled},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加属性")]),a("el-table",{attrs:{data:t.onlyTableData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(r,i){return a("el-tag",{key:i,attrs:{closable:""},on:{close:function(a){return t.handleClose(i,e.row)}}},[t._v(t._s(r))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"slotProp.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{label:"ID",type:"index",align:"center"}}),a("el-table-column",{attrs:{label:"属性名称",prop:"attr_name",align:"center"}}),a("el-table-column",{attrs:{label:"操作",sortable:"",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.editDialog(e.row.attr_id)}}},[t._v("编辑 ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.removeParams(e.row.attr_id)}}},[t._v(" 删除 ")])]}}])})],1)],1)],1)],1),a("el-dialog",{attrs:{title:"添加"+t.titleText,visible:t.addDialogVisible,width:"50%"},on:{"update:visible":function(e){t.addDialogVisible=e},close:t.addDialogClose}},[a("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:t.titleText,prop:"attr_name"}},[a("el-input",{model:{value:t.addForm.attr_name,callback:function(e){t.$set(t.addForm,"attr_name",e)},expression:"addForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.addDialogClose}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addParams}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改"+t.titleText,visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e},close:t.editDialogClose}},[a("el-form",{ref:"editFormRef",attrs:{model:t.editForm,rules:t.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:t.titleText,prop:"attr_name"}},[a("el-input",{model:{value:t.editForm.attr_name,callback:function(e){t.$set(t.editForm,"attr_name",e)},expression:"editForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.editDialogClose}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editParams}},[t._v("确 定")])],1)],1)],1)},i=[],n=(a("99af"),a("4160"),a("a15b"),a("a434"),a("ac1f"),a("1276"),a("498a"),a("159b"),{name:"Params",data:function(){return{catelist:[],selectKeys:[],activeName:"many",manyTableData:[],onlyTableData:[],addDialogVisible:!1,addForm:{},addFormRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:["blur","change"]}]},editDialogVisible:!1,editForm:{}}},created:function(){this.getCateList()},methods:{getCateList:function(){var t=this;this.$http.get("categories").then((function(e){var a=e.data;200===a.meta.status?(t.$message.success(a.meta.msg),t.catelist=a.data):t.$message.error("获取商品分类失败！")})).catch((function(e){t.$message.warning("服务器错误！")}))},getParamsDate:function(){var t=this;3!==this.selectKeys.length?(this.selectKeys=[],this.manyTableData=[],this.onlyTableData=[]):this.$http.get("categories/".concat(this.cateId,"/attributes"),{params:{sel:this.activeName}}).then((function(e){var a=e.data;200===a.meta.status?(t.$message.success(a.meta.msg),a.data.forEach((function(t){0===t.attr_vals.length?t.attr_vals=[]:t.attr_vals=t.attr_vals.split(","),t.inputVisible=!1,t.inputValue=""})),"many"===t.activeName?t.manyTableData=a.data:t.onlyTableData=a.data):t.$message.error("获取权限列表数据异常！")})).catch((function(e){t.$message.warning("服务器错误！")}))},parentCateChange:function(){this.getParamsDate()},handleTabClick:function(){this.getParamsDate()},addDialogClose:function(){this.$refs.addFormRef.resetFields(),this.addDialogVisible=!1},addParams:function(){var t=this;this.$refs.addFormRef.validate((function(e){e&&t.$http.post("categories/".concat(t.cateId,"/attributes"),{attr_name:t.addForm.attr_name,attr_sel:t.activeName}).then((function(e){var a=e.data;201===a.meta.status?(t.$message.success(a.meta.msg),t.addDialogVisible=!1,t.getParamsDate()):t.$message.error("添加参数失败！")})).catch((function(e){t.$message.warning("服务器错误！")}))}))},editDialog:function(t){var e=this;this.$http.get("categories/".concat(this.cateId,"/attributes/").concat(t),{params:{attr_sel:this.activeName}}).then((function(t){var a=t.data;200===a.meta.status?(e.$message.success(a.meta.msg),e.editForm=a.data):e.$message.error("查询分类信息失败！")})).catch((function(t){e.$message.warning("服务器错误！")})),this.editDialogVisible=!0},editDialogClose:function(){this.editDialogVisible=!1,this.$refs.editFormRef.resetFields()},editParams:function(){var t=this;this.$refs.editFormRef.validate((function(e){e&&t.$http.put("categories/".concat(t.cateId,"/attributes/").concat(t.editForm.attr_id),{attr_name:t.editForm.attr_name,attr_sel:t.activeName}).then((function(e){var a=e.data;200===a.meta.status?(t.$message.success(a.meta.msg),t.editDialogVisible=!1,t.getParamsDate()):t.$message.error("修改失败！")})).catch((function(e){t.$message.warning("服务器错误！")}))}))},removeParams:function(t){var e=this;this.$confirm("此操作将永久删除该参数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.delete("categories/".concat(e.cateId,"/attributes/").concat(t)).then((function(t){var a=t.data;200===a.meta.status?(e.$message({type:"success",message:a.meta.msg}),e.getParamsDate()):e.$message.error("删除参数失败！")})).catch((function(t){e.$message.warning("服务器错误！")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},showInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick((function(){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(t){0!==t.inputValue.trim().length?(t.attr_vals.push(t.inputValue.trim()),t.inputValue="",t.inputVisible=!1,this.saveAttrVals(t)):t.inputValue=""},handleClose:function(t,e){e.attr_vals.splice(t,1),this.saveAttrVals(e)},saveAttrVals:function(t){var e=this;this.$http.put("categories/".concat(this.cateId,"/attributes/").concat(t.attr_id),{attr_name:t.attr_name,attr_sel:t.attr_sel,attr_vals:t.attr_vals.join(",")}).then((function(t){var a=t.data;200===a.meta.status?(e.$message.success(a.meta.msg),e.editDialogVisible=!1,e.getCateList()):e.$message.error("修改失败！")})).catch((function(t){e.$message.warning("服务器错误！")}))}},computed:{isBtnDisabled:function(){return 3!==this.selectKeys.length},cateId:function(){return 3===this.selectKeys.length?this.selectKeys[2]:null},titleText:function(){return"many"===this.activeName?"动态参数":"静态属性"}}}),s=n,o=(a("60d4"),a("2877")),l=Object(o["a"])(s,r,i,!1,null,"59ff99e4",null);e["default"]=l.exports},4160:function(t,e,a){"use strict";var r=a("23e7"),i=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"44e7":function(t,e,a){var r=a("861d"),i=a("c6b6"),n=a("b622"),s=n("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},"498a":function(t,e,a){"use strict";var r=a("23e7"),i=a("58a8").trim,n=a("c8d2");r({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},"4f9b":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",{attrs:{to:{path:"/goods"}}},[t._v("商品列表")]),a("el-breadcrumb-item",[t._v("添加商品")])],1),a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"添加商品信息",type:"info",closable:!1,center:"","show-icon":""}}),a("el-steps",{attrs:{space:200,active:t.activeIndex-0,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.rules,"label-width":"200px","label-position":"top"}},[a("el-tabs",{attrs:{"tab-position":"left","before-leave":t.beforeTabLeave},on:{"tab-click":t.tabClicked},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:t.addForm.goods_name,callback:function(e){t.$set(t.addForm,"goods_name",e)},expression:"addForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addForm.goods_price,callback:function(e){t.$set(t.addForm,"goods_price",e)},expression:"addForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addForm.goods_weight,callback:function(e){t.$set(t.addForm,"goods_weight",e)},expression:"addForm.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addForm.goods_number,callback:function(e){t.$set(t.addForm,"goods_number",e)},expression:"addForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[a("el-cascader",{attrs:{options:t.catelist,clearable:"",props:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"}},on:{change:t.parentCateChange},model:{value:t.addForm.goods_cat,callback:function(e){t.$set(t.addForm,"goods_cat",e)},expression:"addForm.goods_cat"}})],1)],1),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},t._l(t.manyTableData,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-checkbox-group",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t,e){return a("el-checkbox",{key:e,attrs:{label:t,border:""}})})),1)],1)})),1),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},t._l(t.onlyTableData,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-input",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}})],1)})),1),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{attrs:{headers:t.headerObj,action:t.uploadUrl,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("mavon-editor",{staticStyle:{"min-height":"500px"},attrs:{toolbars:t.toolbars},model:{value:t.addForm.goods_introduce,callback:function(e){t.$set(t.addForm,"goods_introduce",e)},expression:"addForm.goods_introduce"}}),a("el-button",{staticClass:"btnAdd",attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("添加商品")])],1)],1)],1)],1),a("el-dialog",{attrs:{title:"图片预览",visible:t.previewVisible,width:"50%"},on:{"update:visible":function(e){t.previewVisible=e}}},[a("img",{staticClass:"previewImg",attrs:{src:t.previewPath}})])],1)},i=[],n=(a("c740"),a("4160"),a("a15b"),a("a434"),a("ac1f"),a("1276"),a("159b"),a("cebe")),s=a.n(n),o=a("60bb"),l=a.n(o),c={name:"Add",data:function(){return{activeIndex:0,addForm:{goods_name:"",goods_price:0,goods_weight:0,goods_number:0,goods_cat:[],pics:[],goods_introduce:"",attrs:[]},rules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:["blur","change"]}],goods_price:[{required:!0,message:"请输入商品价格",trigger:["blur","change"]}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:["blur","change"]}],goods_number:[{required:!0,message:"请输入商品数量",trigger:["blur","change"]}],goods_cat:[{required:!0,message:"请选择商品分类",trigger:"change"}]},catelist:[],tabCheck:!0,manyTableData:[],onlyTableData:[],uploadUrl:s.a.defaults.baseURL+"upload",headerObj:{Authorization:window.sessionStorage.getItem("token")},previewPath:"",previewVisible:!1,toolbars:{bold:!0,italic:!0,header:!0,underline:!0,mark:!0,superscript:!0,quote:!0,ol:!0,link:!0,imagelink:!0,help:!0,code:!0,subfield:!0,fullscreen:!0,readmodel:!0,undo:!0,trash:!0,save:!0,navigation:!0}}},created:function(){this.getCateList()},methods:{getCateList:function(){var t=this;this.$http.get("categories").then((function(e){var a=e.data;200===a.meta.status?(t.$message.success(a.meta.msg),t.catelist=a.data):t.$message.error("获取商品分类失败！")})).catch((function(e){t.$message.warning("服务器错误！")}))},parentCateChange:function(){3!==this.addForm.goods_cat.length&&(this.addForm.goods_cat=[],this.$message.error("请选择三级商品分类！"))},beforeTabLeave:function(t,e){var a=this;if("0"===e)return this.$refs.addFormRef.validate((function(t){t?a.tabCheck=!0:(a.$message.error("请填写表单内容！"),a.tabCheck=!1)})),this.tabCheck},tabClicked:function(){var t=this;"1"===this.activeIndex?this.$http.get("categories/".concat(this.cateId,"/attributes"),{params:{sel:"many"}}).then((function(e){var a=e.data;200===a.meta.status?(t.$message.success(a.meta.msg),a.data.forEach((function(t){0===t.attr_vals.length?t.attr_vals=[]:t.attr_vals=t.attr_vals.split(",")})),t.manyTableData=a.data):t.$message.error("获取动态参数失败！")})).catch((function(e){t.$message.warning("服务器错误！")})):"2"===this.activeIndex&&this.$http.get("categories/".concat(this.cateId,"/attributes"),{params:{sel:"only"}}).then((function(e){var a=e.data;200===a.meta.status?(t.$message.success(a.meta.msg),t.onlyTableData=a.data):t.$message.error("获取静态属性失败！")})).catch((function(e){t.$message.warning("服务器错误！")}))},handlePreview:function(t){this.previewPath=t.response.data.url,this.previewVisible=!0},handleRemove:function(t){var e=t.response.data.tmp_path,a=this.addForm.pics.findIndex((function(t){return t.pic===e}));this.addForm.pics.splice(a,1)},handleSuccess:function(t){var e=t;if(200===e.meta.status){this.$message.success(e.meta.msg);var a={pic:e.data.tmp_path};this.addForm.pics.push(a)}else this.$message.error("图片上传失败！")},addGoods:function(){var t=this;this.$refs.addFormRef.validate((function(e){if(!e)return t.$message.error("请检查表单项填写内容");var a=l.a.cloneDeep(t.addForm);a.goods_cat=a.goods_cat.join(","),t.manyTableData.forEach((function(e){var a={attr_id:e.attr_id,attr_value:e.attr_vals.join(",")};t.addForm.attrs.push(a)})),t.onlyTableData.forEach((function(e){var a={attr_id:e.attr_id,attr_value:e.attr_vals};t.addForm.attrs.push(a)})),a.attrs=t.addForm.attrs,t.$http.post("goods",a).then((function(e){var a=e.data;201===a.meta.status?(t.$message.success(a.meta.msg),t.$router.push("/goods")):400===a.meta.status?t.$message.error(a.meta.msg):t.$message.error("添加商品失败！")})).catch((function(e){t.$message.warning("服务器错误！")}))}))}},computed:{cateId:function(){return 3===this.addForm.goods_cat.length?this.addForm.goods_cat[2]:null}}},u=c,d=(a("e9ed"),a("2877")),m=Object(d["a"])(u,r,i,!1,null,"531dc24a",null);e["default"]=m.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),i=a("5899"),n="["+i+"]",s=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),l=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(s,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:l(1),end:l(2),trim:l(3)}},"60d4":function(t,e,a){"use strict";a("a63a")},6547:function(t,e,a){var r=a("a691"),i=a("1d80"),n=function(t){return function(e,a){var n,s,o=String(i(e)),l=r(a),c=o.length;return l<0||l>=c?t?"":void 0:(n=o.charCodeAt(l),n<55296||n>56319||l+1===c||(s=o.charCodeAt(l+1))<56320||s>57343?t?o.charAt(l):n:t?o.slice(l,l+2):s-56320+(n-55296<<10)+65536)}};t.exports={codeAt:n(!1),charAt:n(!0)}},"6bf5":function(t,e,a){"use strict";a("fcde")},"7f6a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品分类")])],1),a("el-card",{staticClass:"box-card"},[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showAddCateDialog()}}},[t._v("添加分类")])],1)],1),a("el-table",{attrs:{data:t.catalist,"row-key":"cat_id",border:"",lazy:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{type:"index",label:"ID",sortable:"",align:"center"}}),a("el-table-column",{attrs:{prop:"cat_name",label:"分类名称",sortable:"",align:"center"}}),a("el-table-column",{attrs:{label:"是否有效",sortable:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[!1===t.row.cat_deleted?a("i",{staticClass:"el-icon-success"}):a("i",{staticClass:"el-icon-error"})]}}])}),a("el-table-column",{attrs:{label:"排序",sortable:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.cat_level?a("el-tag",{attrs:{size:"mini"}},[t._v("一级")]):1===e.row.cat_level?a("el-tag",{attrs:{size:"mini",type:"success"}},[t._v("二级")]):a("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v("三级")])]}}])}),a("el-table-column",{attrs:{label:"操作",sortable:"",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.editDialog(e.row.cat_id)}}},[t._v("编辑 ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.removeCate(e.row.cat_id)}}},[t._v("删除 ")])]}}])})],1),a("el-pagination",{attrs:{"current-page":this.queryInfo.pagenum,"page-sizes":[5,10,20],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("el-dialog",{attrs:{title:"添加分类",visible:t.addDialogVisible,width:"50%"},on:{"update:visible":function(e){t.addDialogVisible=e},close:t.addDialogClosed}},[a("el-form",{ref:"addCateRef",attrs:{model:t.addCateForm,rules:t.addCateRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:t.addCateForm.cat_name,callback:function(e){t.$set(t.addCateForm,"cat_name",e)},expression:"addCateForm.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类"}},[a("el-cascader",{attrs:{options:t.parentCateList,clearable:"",props:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children",checkStrictly:"true"}},on:{change:t.parentCateChange},model:{value:t.selectKeys,callback:function(e){t.selectKeys=e},expression:"selectKeys"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addCate}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改分类",visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("el-form",{ref:"editFormRef",staticClass:"demo-ruleForm",attrs:{model:t.editForm,rules:t.addCateRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:t.editForm.cat_name,callback:function(e){t.$set(t.editForm,"cat_name",e)},expression:"editForm.cat_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editCate}},[t._v("确 定")])],1)],1)],1)],1)},i=[],n={name:"Cate",data:function(){return{catalist:[],total:0,queryInfo:{type:3,pagenum:1,pagesize:5},addDialogVisible:!1,addCateForm:{cat_name:"",cat_pid:0,cat_level:0},addCateRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:["blur","change"]}]},parentCateList:[],selectKeys:[],editForm:{},editDialogVisible:!1}},created:function(){this.getCateList()},methods:{getCateList:function(){var t=this;this.$http.get("categories",{params:this.queryInfo}).then((function(e){var a=e.data;200===a.meta.status?(t.$message.success(a.meta.msg),t.catalist=a.data.result,t.total=a.data.total):t.$message.error("获取列表失败！")})).catch((function(e){t.$message.warning("服务器错误！")}))},handleSizeChange:function(t){this.queryInfo.pagesize=t,this.getCateList()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,this.getCateList()},showAddCateDialog:function(){this.getParentCateList(),this.addDialogVisible=!0},getParentCateList:function(){var t=this;this.$http.get("categories",{params:{type:2}}).then((function(e){var a=e.data;200===a.meta.status?(t.$message.success(a.meta.msg),t.parentCateList=a.data):t.$message.error("获取列表失败！")})).catch((function(e){t.$message.warning("服务器错误！")}))},parentCateChange:function(){this.selectKeys.length>0?(this.addCateForm.cat_pid=this.selectKeys[this.selectKeys.length-1],this.addCateForm.cat_level=this.selectKeys.length):(this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0)},addDialogClosed:function(){this.$refs.addCateRef.resetFields(),this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0,this.selectKeys=[]},addCate:function(){var t=this;this.$refs.addCateRef.validate((function(e){e&&t.$http.post("categories",t.addCateForm).then((function(e){var a=e.data;201===a.meta.status?(t.$message.success(a.meta.msg),t.addDialogVisible=!1,t.getCateList()):t.$message.error("添加分类失败！")})).catch((function(e){t.$message.warning("服务器错误！")}))}))},editDialog:function(t){var e=this;this.editDialogVisible=!0,this.$http.get("categories/"+t).then((function(t){var a=t.data;200===a.meta.status?(e.$message.success(a.meta.msg),e.editForm=a.data):e.$message.error("查询分类信息失败！")})).catch((function(t){e.$message.warning("服务器错误！")}))},editCate:function(){var t=this;this.$refs.editFormRef.validate((function(e){e&&t.$http.put("categories/"+t.editForm.cat_id,{cat_name:t.editForm.cat_name}).then((function(e){var a=e.data;200===a.meta.status?(t.$message.success(a.meta.msg),t.editDialogVisible=!1,t.getCateList()):t.$message.error("修改失败！")})).catch((function(e){t.$message.warning("服务器错误！")}))}))},removeCate:function(t){var e=this;this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.delete("categories/"+t).then((function(t){var a=t.data;200===a.meta.status?(e.$message({type:"success",message:a.meta.msg}),e.getCateList()):e.$message.error("删除分类失败！")})).catch((function(t){e.$message.warning("服务器错误！")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},s=n,o=(a("10d0"),a("2877")),l=Object(o["a"])(s,r,i,!1,null,"71d53463",null);e["default"]=l.exports},"8aa5":function(t,e,a){"use strict";var r=a("6547").charAt;t.exports=function(t,e,a){return e+(a?r(t,e).length:1)}},"8c12":function(t,e,a){},9263:function(t,e,a){"use strict";var r=a("ad6d"),i=a("9f7f"),n=RegExp.prototype.exec,s=String.prototype.replace,o=n,l=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=i.UNSUPPORTED_Y||i.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=l||u||c;d&&(o=function(t){var e,a,i,o,d=this,m=c&&d.sticky,g=r.call(d),p=d.source,f=0,h=t;return m&&(g=g.replace("y",""),-1===g.indexOf("g")&&(g+="g"),h=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(p="(?: "+p+")",h=" "+h,f++),a=new RegExp("^(?:"+p+")",g)),u&&(a=new RegExp("^"+p+"$(?!\\s)",g)),l&&(e=d.lastIndex),i=n.call(m?a:d,h),m?i?(i.input=i.input.slice(f),i[0]=i[0].slice(f),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:l&&i&&(d.lastIndex=d.global?i.index+i[0].length:e),u&&i&&i.length>1&&s.call(i[0],a,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i}),t.exports=o},"9f7f":function(t,e,a){"use strict";var r=a("d039");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a15b:function(t,e,a){"use strict";var r=a("23e7"),i=a("44ad"),n=a("fc6a"),s=a("a640"),o=[].join,l=i!=Object,c=s("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(t){return o.call(n(this),void 0===t?",":t)}})},a434:function(t,e,a){"use strict";var r=a("23e7"),i=a("23cb"),n=a("a691"),s=a("50c4"),o=a("7b0b"),l=a("65f0"),c=a("8418"),u=a("1dde"),d=a("ae40"),m=u("splice"),g=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,f=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!m||!g},{splice:function(t,e){var a,r,u,d,m,g,v=o(this),_=s(v.length),y=i(t,_),x=arguments.length;if(0===x?a=r=0:1===x?(a=0,r=_-y):(a=x-2,r=f(p(n(e),0),_-y)),_+a-r>h)throw TypeError(b);for(u=l(v,r),d=0;d<r;d++)m=y+d,m in v&&c(u,d,v[m]);if(u.length=r,a<r){for(d=y;d<_-r;d++)m=d+r,g=d+a,m in v?v[g]=v[m]:delete v[g];for(d=_;d>_-r+a;d--)delete v[d-1]}else if(a>r)for(d=_-r;d>y;d--)m=d+r-1,g=d+a-1,m in v?v[g]=v[m]:delete v[g];for(d=0;d<a;d++)v[d+y]=arguments[d+2];return v.length=_-r+a,u}})},a63a:function(t,e,a){},a640:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&r((function(){a.call(null,e||function(){throw 1},1)}))}},ac1f:function(t,e,a){"use strict";var r=a("23e7"),i=a("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},b0c0:function(t,e,a){var r=a("83ab"),i=a("9bf2").f,n=Function.prototype,s=n.toString,o=/^\s*function ([^ (]*)/,l="name";r&&!(l in n)&&i(n,l,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},c740:function(t,e,a){"use strict";var r=a("23e7"),i=a("b727").findIndex,n=a("44d2"),s=a("ae40"),o="findIndex",l=!0,c=s(o);o in[]&&Array(1)[o]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!c},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(o)},c8d2:function(t,e,a){var r=a("d039"),i=a("5899"),n="​᠎";t.exports=function(t){return r((function(){return!!i[t]()||n[t]()!=n||i[t].name!==t}))}},cb38:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品列表")])],1),a("el-card",{staticClass:"box-card"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:t.getGoodsList},model:{value:t.queryInfo.query,callback:function(e){t.$set(t.queryInfo,"query",e)},expression:"queryInfo.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getGoodsList},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addGoodsPage}},[t._v("添加商品")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.goodslist,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"ID",align:"center"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格(元)",align:"center",width:"110px"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量",align:"center",width:"85px"}}),a("el-table-column",{attrs:{label:"商品创建时间",align:"center",width:"105px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("dateFormat")(e.row.add_time))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.editDialog(e.row.goods_id)}}},[t._v("编辑 ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.removeGoods(e.row.goods_id)}}},[t._v("删除 ")])]}}])})],1),a("el-pagination",{attrs:{"current-page":this.queryInfo.pagenum,"page-sizes":[5,10,20],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total,background:""},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"修改商品信息",visible:t.editDialogVisible,width:"75%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("el-form",{ref:"editFormRef",attrs:{model:t.editForm,rules:t.editFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:t.editForm.goods_name,callback:function(e){t.$set(t.editForm,"goods_name",e)},expression:"editForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{model:{value:t.editForm.goods_price,callback:function(e){t.$set(t.editForm,"goods_price",e)},expression:"editForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{model:{value:t.editForm.goods_number,callback:function(e){t.$set(t.editForm,"goods_number",e)},expression:"editForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{model:{value:t.editForm.goods_weight,callback:function(e){t.$set(t.editForm,"goods_weight",e)},expression:"editForm.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品介绍"}},[a("mavon-editor",{staticStyle:{"min-height":"300px"},attrs:{toolbars:t.toolbars},model:{value:t.editForm.goods_introduce,callback:function(e){t.$set(t.editForm,"goods_introduce",e)},expression:"editForm.goods_introduce"}})],1),a("el-form-item",{attrs:{label:"商品图片"}},[a("el-upload",{attrs:{headers:t.headerObj,action:t.uploadUrl,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"file-list":t.fileList,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),a("el-form-item",{attrs:{label:"动态参数"}}),t._l(t.manyTableData,(function(e){return a("el-form-item",{key:e.index,attrs:{label:e.attr_name,"label-width":"150px"}},[a("el-checkbox-group",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t,e){return a("el-checkbox",{key:e,attrs:{label:t,border:""}})})),1)],1)})),a("el-form-item",{attrs:{label:"静态属性"}}),t._l(t.onlyTableData,(function(e){return a("el-form-item",{key:e.index,attrs:{label:e.attr_name,"label-width":"230px"}},[a("el-input",{model:{value:e.attr_value,callback:function(a){t.$set(e,"attr_value",a)},expression:"item.attr_value"}})],1)}))],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editGoodsInfo}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"图片预览",visible:t.previewVisible,width:"50%"},on:{"update:visible":function(e){t.previewVisible=e}}},[a("img",{staticClass:"previewImg",attrs:{src:t.previewPath}})])],1)},i=[],n=(a("c740"),a("4160"),a("a15b"),a("a434"),a("b0c0"),a("ac1f"),a("1276"),a("159b"),a("60bb")),s=a.n(n),o=a("cebe"),l=a.n(o),c={name:"list",data:function(){var t=function(t,e,a){return e>0?a():a(new Error("请输入大于0的参数值"))};return{queryInfo:{query:"",pagenum:1,pagesize:10},goodslist:[],total:0,editDialogVisible:!1,editForm:{},editFormRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:["blur","change"]}],goods_price:[{required:!0,message:"请输入商品价格",trigger:["blur","change"]},{validator:t,trigger:["blur","change"]}],goods_number:[{required:!0,message:"请输入商品数量",trigger:["blur","change"]},{validator:t,trigger:["blur","change"]}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:["blur","change"]},{validator:t,trigger:["blur","change"]}]},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,mark:!0,superscript:!0,quote:!0,ol:!0,link:!0,imagelink:!0,help:!0,code:!0,subfield:!0,fullscreen:!0,readmodel:!0,undo:!0,trash:!0,save:!0,navigation:!0},fileList:[],previewVisible:!1,uploadUrl:l.a.defaults.baseURL+"upload",headerObj:{Authorization:window.sessionStorage.getItem("token")},previewPath:"",manyTableData:[],onlyTableData:[]}},created:function(){this.getGoodsList()},methods:{getGoodsList:function(){var t=this;this.$http.get("goods",{params:this.queryInfo}).then((function(e){var a=e.data;200===a.meta.status?(t.$message.success(a.meta.msg),t.goodslist=a.data.goods,t.total=a.data.total):t.$message.error("获取商品列表失败！")})).catch((function(e){t.$message.warning("服务器错误！")}))},handleSizeChange:function(t){this.queryInfo.pagesize=t,this.getGoodsList()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,this.getGoodsList()},removeGoods:function(t){var e=this;this.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.delete("goods/"+t).then((function(t){var a=t.data;200===a.meta.status?(e.$message({type:"success",message:a.meta.msg}),e.getGoodsList()):e.$message.error("删除商品失败！")})).catch((function(t){e.$message.warning("服务器错误！")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},addGoodsPage:function(){this.$router.push("/goods/add")},editDialog:function(t){var e=this;this.editDialogVisible=!0,this.$http.get("goods/"+t).then((function(t){e.manyTableData=[],e.onlyTableData=[];var a=t.data;200===a.meta.status?(e.$message.success(a.meta.msg),e.fileList=[],a.data.pics.forEach((function(t){var a={name:t.pics_big.split("/")[3],url:t.pics_big_url};e.fileList.push(a)})),a.data.attrs.forEach((function(t){t.attr_vals=t.attr_vals.split(","),"many"===t.attr_sel?e.manyTableData.push(t):e.onlyTableData.push(t)})),e.editForm=a.data,e.editForm.attrs=[]):e.$message.error("获取商品信息失败！")})).catch((function(t){e.$message.warning("服务器错误！")}))},editGoodsInfo:function(){var t=this;this.$refs.editFormRef.validate((function(e){if(!e)return t.$message.error("请检查表单项填写内容");var a=s.a.cloneDeep(t.editForm);t.manyTableData.forEach((function(t){var e={attr_id:t.attr_id,attr_value:t.attr_vals.join(",")};a.attrs.push(e)})),t.onlyTableData.forEach((function(t){var e={attr_id:t.attr_id,attr_value:t.attr_vals};a.attrs.push(e)})),t.editForm.pics.forEach((function(t){})),t.$http.put("goods/".concat(a.goods_id),a).then((function(e){var a=e.data;200===a.meta.status?(t.$message.success(a.meta.msg),t.getGoodsList(),t.editDialogVisible=!1):400===a.meta.status?t.$message.error(a.meta.msg):t.$message.error("修改商品信息失败！")})).catch((function(e){t.$message.warning("服务器错误！")}))}))},handlePreview:function(t){this.previewPath=t.url,this.previewVisible=!0},handleRemove:function(t){var e=this.editForm.pics.findIndex((function(e){return e.pic===t.name}));this.editForm.pics.splice(e,1)},handleSuccess:function(t){var e=t;if(200===e.meta.status){this.$message.success(e.meta.msg);var a={pic:e.data.tmp_path};this.editForm.pics.push(a)}else this.$message.error("图片上传失败！")}}},u=c,d=(a("6bf5"),a("2877")),m=Object(d["a"])(u,r,i,!1,null,"5971027b",null);e["default"]=m.exports},d784:function(t,e,a){"use strict";a("ac1f");var r=a("6eeb"),i=a("d039"),n=a("b622"),s=a("9263"),o=a("9112"),l=n("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=n("replace"),m=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),g=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,d){var p=n(t),f=!i((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),h=f&&!i((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[l]=function(){return a},a.flags="",a[p]=/./[p]),a.exec=function(){return e=!0,null},a[p](""),!e}));if(!f||!h||"replace"===t&&(!c||!u||m)||"split"===t&&!g){var b=/./[p],v=a(p,""[t],(function(t,e,a,r,i){return e.exec===s?f&&!i?{done:!0,value:b.call(e,a,r)}:{done:!0,value:t.call(a,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),_=v[0],y=v[1];r(String.prototype,t,_),r(RegExp.prototype,p,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}d&&o(RegExp.prototype[p],"sham",!0)}},e9ed:function(t,e,a){"use strict";a("8c12")},fcde:function(t,e,a){},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=goods.185256e6.js.map